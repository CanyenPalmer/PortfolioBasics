/* =========================================================
   MOBILE-ONLY OVERRIDES (â‰¤768px). Desktop/laptop unchanged.
========================================================= */
@media (max-width: 768px) {

  /* ------------------ HARD STOP sideways scroll ------------------ */
  html, body {
    max-width: 100vw !important;
    overflow-x: hidden !important;     /* no horizontal page scroll */
    overscroll-behavior-x: none !important;
    touch-action: pan-y !important;    /* only vertical panning */
  }

  /* Anything that might accidentally exceed viewport width */
  #home, #about, #experience, #projects, #education, #testimonials, #contact,
  .container, [class*="container"], [class*="wrapper"], [class*="grid"] {
    max-width: 100vw !important;
    overflow-x: clip !important;       /* clip any stray wide child */
  }

  /* Long words/links wonâ€™t blow out the layout */
  * { word-break: break-word; }

  /* ------------------ Boot/visibility edge case ------------------ */
  /* If boot overlay visibility sticks on phones, show content anyway */
  html.mach-booting body > *:not(#boot-overlay) { visibility: visible !important; }
  #boot-overlay { display: none !important; }

  /* ===================== HERO (#home) ===================== */
  #home {
    overflow: visible !important;
    min-height: auto !important;
    align-items: flex-start !important;     /* no vertical squish */
    padding-top: 4.5rem !important;
    padding-bottom: 1rem !important;
  }

  /* Toolbar = single row, horizontal swipe inside the bar (not the page) */
  #home > nav {
    position: static !important;
    width: 100% !important;
    margin: 0 0 .75rem 0 !important;
    z-index: 1 !important;
  }
  #home nav ul {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;           /* one line */
    white-space: nowrap !important;
    overflow-x: auto !important;            /* sideways scroll ONLY here */
    overflow-y: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    gap: .75rem !important;
    padding: .25rem .5rem !important;
  }
  #home nav li { flex: 0 0 auto !important; }
  #home nav a { display: inline-flex !important; align-items: center; }

  /* Stack hero content: text first, image last â€” visible, no transforms */
  #home .container .grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 1rem !important;
    align-items: start !important;
  }
  #home .container .grid > .space-y-5 { order: 1 !important; }
  #home .container .grid > .justify-self-center,
  #home .container .grid > figure     { order: 2 !important; }
  #home .container .grid > * {
    opacity: 1 !important;
    visibility: visible !important;
    transform: none !important;
    filter: none !important;
    display: block !important;
    pointer-events: auto !important;
    max-width: 100% !important;
  }

  /* "Scroll to explore" prompt: make inline so it canâ€™t overlay/hide */
  #home > div[class*="absolute"][class*="bottom-"] {
    position: static !important;
    margin-top: .5rem !important;
  }

  /* ===================== ABOUT (#about) ===================== */
  #about .grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 1rem !important;
    align-items: start !important;
  }
  #about [aria-label="About images"] {
    opacity: 1 !important;
    transform: none !important;
    height: auto !important;
    overflow: visible !important;
    max-width: 100% !important;
  }
  #about [aria-label="About images"] .absolute { inset: 0 !important; }

  /* ============== EXPERIENCE ([data-section="experience"]) ============== */
  /* Normalize geometry so cards behave like simple, in-flow blocks */
  [data-section="experience"] .lockWindow       { height: auto !important; }
  [data-section="experience"] .subheaderSticky  { position: relative !important; top: auto !important; }
  [data-section="experience"] .stageHolder,
  [data-section="experience"] .stageFlow,
  [data-section="experience"] .stack {
    position: static !important;
    height: auto !important;
    width: 100% !important;
    transform: none !important;
    overflow: visible !important;
    max-width: 100% !important;
  }

  /* Cards (including collapsed/focused/expanded variants) â€” no lateral transforms */
  [data-section="experience"] .card,
  [data-section="experience"] .cardCollapsed,
  [data-section="experience"] .cardFocused,
  [data-section="experience"] .cardExpanded {
    position: relative !important;
    inset: auto !important;
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 0 1rem 0 !important;
    transform: none !important;
    opacity: 1 !important;
    overflow: visible !important;
  }

  /* ðŸ”‘ Expanded details (that motion div with .mt-5) scrolls INSIDE the card */
  [data-section="experience"] .cardExpanded .mt-5,
  [data-section="experience"] .cardFocused  .mt-5,
  [data-section="experience"] .card         .mt-5 {
    max-height: calc(100dvh - 140px) !important; /* dynamic vh = stable on mobile */
    overflow: auto !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
    padding-top: 6px !important;
    padding-bottom: 10px !important;
  }

  /* The usual suspects for accidental width blowout inside details */
  [data-section="experience"] .card .mt-5 * {
    max-width: 100% !important;
  }

  /* Slight, targeted type trim ONLY for the first (Lead Analyst) card */
  [data-section="experience"] .stack > *:first-child {
    font-size: 0.95em !important;
    line-height: 1.45 !important;
  }

  /* Metrics grid â†’ single column on phones */
  [data-section="experience"] .metricsGrid { grid-template-columns: 1fr !important; }

  /* ===================== TESTIMONIALS (#testimonials) ===================== */
  /* Each desktop pair wrapper uses md:flex-row/md:flex-row-reverse;
     on phones we stack them and enforce order (details first, image below). */
  #testimonials [class*="md:flex-row"],
  #testimonials [class*="md:flex-row-reverse"] {
    display: flex !important;
    flex-direction: column !important;
    align-items: stretch !important;
    gap: .9rem !important;
    margin-bottom: 1.25rem !important;
    max-width: 100% !important;
  }

  /* Robust ordering: put figure (image) under the details, regardless of alternation */
  #testimonials [class*="md:flex-row"]    > figure,
  #testimonials [class*="md:flex-row"]    > [class*="image"],
  #testimonials [class*="md:flex-row"]    > [class*="img"],
  #testimonials [class*="md:flex-row"]    > [class*="media"],
  #testimonials [class*="md:flex-row-reverse"] > figure,
  #testimonials [class*="md:flex-row-reverse"] > [class*="image"],
  #testimonials [class*="md:flex-row-reverse"] > [class*="img"],
  #testimonials [class*="md:flex-row-reverse"] > [class*="media"] {
    order: 2 !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  #testimonials [class*="md:flex-row"]    > :not(figure):not([class*="image"]):not([class*="img"]):not([class*="media"]),
  #testimonials [class*="md:flex-row-reverse"] > :not(figure):not([class*="image"]):not([class*="img"]):not([class*="media"]) {
    order: 1 !important;
    max-width: 100% !important;
  }

  /* Images full-width under details; never cause horizontal scroll */
  #testimonials img {
    width: 100% !important;
    height: auto !important;
    display: block !important;
    max-width: 100% !important;
  }

  /* Kill sticky/fixed bits in testimonials that could create weird layers */
  #testimonials [style*="position: sticky"],
  #testimonials [style*="position: fixed"] {
    position: static !important;
    top: auto !important;
  }
}



















