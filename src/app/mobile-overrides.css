/* Mobile-only fixes (≤768px). Desktop/laptop remain untouched. */
@media (max-width: 768px) {

  /* =========================
     GLOBAL SAFETY
  ========================== */
  html, body { overflow-x: hidden; }
  img, video, canvas { max-width: 100%; height: auto; display: block; }

  /* =========================
     HERO (#home)
     - Show title/details (no hidden/transform)
     - Toolbar = one-row, swipe-scroll
     - Image LAST
     - No overlap into next section
  ========================== */

  /* Keep hero content visible */
  #home { position: relative; z-index: 0; padding-top: 3.25rem; padding-bottom: 1rem; }
  #home .container { position: relative; z-index: 1; }
  #home .container .grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    align-items: start !important;
    gap: 1rem !important;
  }
  /* Make sure hero children aren’t hidden by animations */
  #home .container .grid > * { opacity: 1 !important; transform: none !important; visibility: visible !important; }

  /* Text block (your copy wrapper uses .space-y-5) FIRST */
  #home .container .grid > .space-y-5 { order: 1 !important; }

  /* Media column LAST (covers common wrappers) */
  #home .container .grid > .justify-self-center { order: 2 !important; }
  #home .container .grid > figure { order: 2 !important; }

  /* Toolbar as a horizontal, swipeable rail */
  #home > nav {
    position: static !important;
    width: 100% !important;
    margin: 0 0 .5rem 0 !important;
    z-index: 2 !important;
  }
  #home nav ul {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;             /* single line */
    overflow-x: auto !important;              /* swipe horizontally */
    overflow-y: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    gap: .75rem !important;
    padding: .25rem .5rem !important;
    white-space: nowrap !important;
  }
  #home nav li { flex: 0 0 auto !important; }
  #home nav a { display: inline-flex !important; align-items: center; }

  /* =========================
     ABOUT (#about)
     - Ensure visible, single column
  ========================== */
  #about .grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    align-items: start !important;
    gap: 1rem !important;
  }
  /* If your image area uses this hook, keep it visible */
  #about [aria-label="About images"] {
    height: min(60vh, 560px) !important;
    opacity: 1 !important;
    transform: none !important;
    overflow: visible !important;
  }
  #about [aria-label="About images"] .absolute { inset: 0 !important; }

  /* =========================
     EXPERIENCE (flow + locked decks)
     - Remove duplicates (flow only)
     - Both cards expand fully, scrollable
     - Keep card animations; stop clipping/locking
  ========================== */

  /* Show flowing deck; hide locked/fixed deck (prevents duplicates) */
  #experience .stageFlow,  [data-section="experience"] .stageFlow  { display: block !important; opacity: 1 !important; visibility: visible !important; }
  #experience .stageFixed, [data-section="experience"] .stageFixed { display: none !important; }

  /* Remove giant lock window and sticky traps */
  #experience .lockWindow,       [data-section="experience"] .lockWindow      { height: auto !important; }
  #experience .subheaderSticky,  [data-section="experience"] .subheaderSticky { position: relative !important; top: auto !important; }

  /* Let the deck flow normally; avoid transforms that shove off-screen */
  #experience .stageHolder, [data-section="experience"] .stageHolder,
  #experience .stack,       [data-section="experience"] .stack {
    position: static !important;
    height: auto !important;
    width: 100% !important;
    transform: none !important;
    overflow: visible !important;
  }

  /* Cards: full-width, stacked; allow expanded content to lay out and scroll */
  #experience .card, [data-section="experience"] .card {
    position: relative !important;
    inset: auto !important;
    width: 100% !important;
    max-width: none !important;
    margin: 0 0 1rem 0 !important;
    transform: none !important;     /* stop side slide-in shifting content */
    opacity: 1 !important;
    transition: none !important;
    overflow: visible !important;   /* expanded body can extend */
    background: rgba(13,19,29,0.98) !important;
    backdrop-filter: none !important;
    z-index: 1 !important;
    scroll-margin-top: 72px;        /* when focused, top isn’t cut off */
  }
  /* First card must be able to layer above others when opened */
  #experience .card:first-of-type, [data-section="experience"] .card:first-of-type { z-index: 3 !important; }

  /* Expanded bodies should not be absolutely positioned; let them flow */
  #experience .card [style*="position: absolute"],
  [data-section="experience"] .card [style*="position: absolute"] {
    position: static !important;
  }

  /* Remove caps/clip masks/overflow that hide expanded content */
  #experience .card *[class*="details"],
  #experience .card *[class*="body"],
  #experience .card *[class*="inner"],
  #experience .card *[class*="content"],
  #experience .card *[style*="max-height"],
  #experience .card *[style*="clip-path"],
  #experience .card *[style*="mask-image"],
  #experience .card *[style*="-webkit-mask-image"],
  [data-section="experience"] .card *[class*="details"],
  [data-section="experience"] .card *[class*="body"],
  [data-section="experience"] .card *[class*="inner"],
  [data-section="experience"] .card *[class*="content"],
  [data-section="experience"] .card *[style*="max-height"],
  [data-section="experience"] .card *[style*="clip-path"],
  [data-section="experience"] .card *[style*="mask-image"],
  [data-section="experience"] .card *[style*="-webkit-mask-image"] {
    max-height: none !important;
    height: auto !important;
    overflow: visible !important;
    clip-path: none !important;
    -webkit-mask-image: none !important;
            mask-image: none !important;
  }

  /* Metrics grid inside cards → one column on phones */
  #experience .metricsGrid, [data-section="experience"] .metricsGrid { grid-template-columns: 1fr !important; }

  /* =========================
     TESTIMONIALS (#testimonials)
     - Keep desktop text formatting
     - Image directly under that testimonial’s details
     - Avoid scroll traps
  ========================== */

  /* Stack each pair vertically on phones (desktop alternation preserved at md+) */
  #testimonials [class*="md:flex-row"] { flex-direction: column !important; }

  /* For rows reversed on desktop, fix order on phones */
  #testimonials [class*="md:flex-row-reverse"] > :first-child { order: 2 !important; }
  #testimonials [class*="md:flex-row-reverse"] > :last-child  { order: 1 !important; }

  /* Ensure the image block is under the details regardless of implementation */
  #testimonials figure { order: 2 !important; }
  #testimonials [class*="image"], #testimonials [class*="img"], #testimonials [class*="media"] { order: 2 !important; }
  #testimonials img { width: 100%; height: auto; display: block; }

  /* Kill sticky/fixed internals that can trap scroll on phones */
  #testimonials [style*="position: sticky"],
  #testimonials [style*="position: fixed"] { position: static !important; top: auto !important; }
}













