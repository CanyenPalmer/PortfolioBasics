/* =========================================================
   MOBILE-ONLY OVERRIDES (≤768px). Desktop/laptop unchanged.
========================================================= */
@media (max-width: 768px) {
  /* --- Global safety (no sideways scroll) --- */
  html, body { overflow-x: hidden; }
  img, video, canvas { max-width: 100%; height: auto; display: block; }

  /* =========================================
     0) Boot / hydration visibility override
     (so Hero/About can't be invisible on phones)
  ========================================= */
  html.mach-booting body > *:not(#boot-overlay):not(style):not(script) {
    visibility: visible !important;
  }
  #boot-overlay { display: none !important; }

  /* =========================================
     1) HERO (#home) — show content, stack cleanly
  ========================================= */
  /* Stop flex-centering & overflow clipping hiding content on short viewports */
  #home {
    overflow: visible !important;
    min-height: auto !important;
    align-items: flex-start !important;
    padding-top: 4.5rem !important;
    padding-bottom: 1rem !important;
  }

  /* Keep toolbar in one horizontal, swipeable row */
  #home > nav {
    position: static !important;
    width: 100% !important;
    margin: 0 0 .75rem 0 !important;
    z-index: 1 !important;
  }
  #home nav ul {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;            /* single row */
    overflow-x: auto !important;             /* sideways scroll */
    overflow-y: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    white-space: nowrap !important;
    gap: .75rem !important;
    padding: .25rem .5rem !important;
  }
  #home nav li { flex: 0 0 auto !important; }

  /* Stack hero grid: text first, image last */
  #home .container .grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 1rem !important;
    align-items: start !important;
  }
  #home .container .grid > .space-y-5 { order: 1 !important; }      /* title + details */
  #home .container .grid > .justify-self-center,
  #home .container .grid > figure     { order: 2 !important; }      /* avatar/media */

  /* Unhide any hero children that start hidden by animations */
  #home .container .grid > * {
    opacity: 1 !important;
    visibility: visible !important;
    transform: none !important;
    filter: none !important;
    display: block !important;
    pointer-events: auto !important;
  }

  /* “Scroll to explore” prompt is absolutely bottom’d; make it inline so it won’t cover */
  #home > div[class*="absolute"][class*="bottom-"] {
    position: static !important;
    margin-top: .5rem !important;
  }

  /* =========================================
     2) ABOUT (#about) — ensure visible, single column
  ========================================= */
  #about .grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 1rem !important;
    align-items: start !important;
  }
  #about [aria-label="About images"] {
    opacity: 1 !important;
    transform: none !important;
    height: auto !important;
    overflow: visible !important;
  }
  #about [aria-label="About images"] .absolute { inset: 0 !important; }

  /* =========================================================
     3) EXPERIENCE ([data-section="experience"])
     Keep the section behavior, just make expanded details scrollable.
  ========================================================= */
  /* Normalize geometry so cards behave like simple blocks on phones */
  [data-section="experience"] .lockWindow      { height: auto !important; }
  [data-section="experience"] .subheaderSticky { position: relative !important; top: auto !important; }
  [data-section="experience"] .stageHolder,
  [data-section="experience"] .stageFlow,
  [data-section="experience"] .stack {
    position: static !important;
    height: auto !important;
    width: 100% !important;
    transform: none !important;
    overflow: visible !important;
  }

  /* Cards: keep visuals, prevent off-canvas transforms */
  [data-section="experience"] .card,
  [data-section="experience"] .cardCollapsed,
  [data-section="experience"] .cardFocused,
  [data-section="experience"] .cardExpanded {
    position: relative !important;
    inset: auto !important;
    width: 100% !important;
    max-width: none !important;
    margin: 0 0 1rem 0 !important;
    transform: none !important;
    opacity: 1 !important;
    overflow: visible !important;
  }

  /* 🔑 Expanded details wrapper is the motion div with .mt-5 — make it scroll inside the card */
  [data-section="experience"] .cardExpanded .mt-5,
  [data-section="experience"] .cardFocused  .mt-5,
  [data-section="experience"] .card         .mt-5 {
    max-height: calc(100vh - 140px) !important;  /* readable area on phones */
    overflow: auto !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
    padding-top: 6px !important;                 /* account for ~¼" UI trim */
    padding-bottom: 8px !important;
    height: auto !important;                     /* defeat 0→auto animation caps */
  }

  /* Optional: metrics grid single column on phones */
  [data-section="experience"] .metricsGrid { grid-template-columns: 1fr !important; }

  /* =========================================================
     4) TESTIMONIALS (#testimonials)
     Make each item a tidy section: details first, image right below.
  ========================================================= */
  /* The pair wrapper uses md:flex-row / md:flex-row-reverse on desktop.
     On phones, stack and enforce consistent order. */
  #testimonials [class*="md:flex-row"] {
    display: flex !important;
    flex-direction: column !important;
    align-items: stretch !important;
    gap: .9rem !important;
    margin-bottom: 1.25rem !important;
  }

  /* If desktop order is [image, details] (md:flex-row), flip to [details, image] on phones */
  #testimonials [class*="md:flex-row"] > :first-child { order: 2 !important; }  /* image */
  #testimonials [class*="md:flex-row"] > :last-child  { order: 1 !important; }  /* details */

  /* If desktop alternates with md:flex-row-reverse ([details, image]), keep that order */
  #testimonials [class*="md:flex-row-reverse"] > :first-child { order: 1 !important; } /* details */
  #testimonials [class*="md:flex-row-reverse"] > :last-child  { order: 2 !important; } /* image */

  /* Make testimonial images fill the width beneath details */
  #testimonials img { width: 100% !important; height: auto !important; display: block !important; }
}



















