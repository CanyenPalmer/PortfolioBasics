/* Mobile-only fixes (≤768px). Desktop/laptop remain untouched. */
@media (max-width: 768px) {

  /* =========================================================
   * HERO (#home)
   * - Toolbar remains horizontal and scrollable
   * - Title/details visible; hero image LAST
   * - Avoid overlap with next section
   * ======================================================= */

  /* Toolbar: horizontal swipe rail */
  #home > nav {
    position: static !important;
    width: 100% !important;
    margin: 0 0 .5rem 0 !important;
    z-index: 2 !important;
  }
  #home nav ul {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;        /* keep one row */
    overflow-x: auto !important;         /* horizontal scroll */
    overflow-y: hidden !important;
    -webkit-overflow-scrolling: touch;   /* iOS momentum */
    gap: .75rem !important;
    padding: .25rem .5rem !important;
    white-space: nowrap !important;
  }
  #home nav li { flex: 0 0 auto !important; }

  /* Ensure the hero grid stacks cleanly and content stays visible */
  #home .container .grid {
    grid-template-columns: 1fr !important;   /* single column on phones */
    align-items: start !important;
    gap: 1rem !important;
  }

  /* Text (your copy wrapper uses .space-y-5) first */
  #home .container .grid > .space-y-5 { order: 1 !important; }

  /* Media wrapper: many builds use .justify-self-center for the avatar/media column */
  #home .container .grid > .justify-self-center { order: 2 !important; }

  /* If the media is a direct figure (fallback) */
  #home .container .grid > figure { order: 2 !important; }

  /* Keep CTAs comfy without forcing toolbar vertical */
  #home .space-y-5 [class*="flex"] { row-gap: .5rem !important; }
  #home a.inline-flex, #home a[role="button"], #home .btn, #home button {
    min-height: 44px; justify-content: center;
  }

  /* Ensure nothing from hero overlays the next section */
  #home { position: relative; z-index: 0; padding-bottom: 1rem; }
  #home .container { position: relative; z-index: 1; }


  /* =========================================================
   * EXPERIENCE ([data-section="experience"])
   * - Show each card once (hide locked deck)
   * - Both cards expand fully (no clipping on the first card)
   * - Keep card animations; just disable clipping containers
   * ======================================================= */

  /* Prevent double rendering: use flowing deck only, hide locked deck */
  [data-section="experience"] .stageFlow  { display: block !important; opacity: 1 !important; visibility: visible !important; }
  [data-section="experience"] .stageFixed { display: none !important; }

  /* Remove giant lock window & sticky traps on mobile */
  [data-section="experience"] .lockWindow       { height: auto !important; }
  [data-section="experience"] .subheaderSticky  { position: relative !important; top: auto !important; }

  /* Let the stack participate in normal flow; no transforms that push offscreen */
  [data-section="experience"] .stageHolder,
  [data-section="experience"] .stack {
    position: static !important;
    height: auto !important;
    width: 100% !important;
    transform: none !important;
    overflow: visible !important;
  }

  /* Cards: full width, stacked, readable */
  [data-section="experience"] .card {
    position: relative !important;
    inset: auto !important;
    width: 100% !important;
    max-width: none !important;
    margin: 0 0 1rem 0 !important;
    overflow: visible !important;           /* allow expanded content to show */
    transform: none !important;             /* stop side slide-ins that can misplace content */
    opacity: 1 !important;
    transition: none !important;
    background: rgba(13,19,29,0.98) !important;
    backdrop-filter: none !important;
    z-index: 1 !important;                  /* ensure first card sits above anything behind it */
  }

  /* Make absolutely-positioned expanded bodies part of the layout, so the FIRST card can fully show */
  [data-section="experience"] .card [style*="position: absolute"] {
    position: static !important;
  }

  /* Ensure any height caps/clip masks are removed when expanded */
  [data-section="experience"] .card *[class*="details"],
  [data-section="experience"] .card *[class*="body"],
  [data-section="experience"] .card *[class*="inner"],
  [data-section="experience"] .card *[class*="content"],
  [data-section="experience"] .card *[style*="max-height"],
  [data-section="experience"] .card *[style*="clip-path"],
  [data-section="experience"] .card *[style*="mask-image"],
  [data-section="experience"] .card *[style*="-webkit-mask-image"] {
    max-height: none !important;
    height: auto !important;
    overflow: visible !important;
    clip-path: none !important;
    -webkit-mask-image: none !important;
            mask-image: none !important;
  }

  /* Metric tiles inside cards → one column on phones */
  [data-section="experience"] .metricsGrid { grid-template-columns: 1fr !important; }


  /* =========================================================
   * TESTIMONIALS (#testimonials)
   * - Keep the *same desktop text formatting* (don’t touch text styles)
   * - Only move the image directly UNDER the details
   * - Avoid any sticky/fixed that could trap scroll
   * ======================================================= */

  /* Stack each testimonial pair vertically on mobile */
  #testimonials [class*="flex"][class*="md:flex-row"] { flex-direction: column !important; }

  /* If the pair wrapper is just 'flex flex-col', keep it as-is (already stacked) */

  /* Reorder the two direct children consistently:
     - Last child becomes the image (common in many builds)
     - If your markup already has details first, this preserves that;
       if image is first in markup, this swaps them on mobile. */
  #testimonials [class*="flex"][class*="md:flex-row"] > :first-child { order: 1 !important; }
  #testimonials [class*="flex"][class*="md:flex-row"] > :last-child  { order: 2 !important; }

  /* Make sure images sit under text and scale correctly */
  #testimonials img { width: 100%; height: auto; display: block; }

  /* Safety: prevent scroll traps */
  #testimonials [style*="position: sticky"],
  #testimonials [style*="position: fixed"] {
    position: static !important; top: auto !important;
  }


  /* =========================================================
   * GLOBAL mobile safety to avoid sideways nudge
   * ======================================================= */
  html, body { overflow-x: hidden; }
}











