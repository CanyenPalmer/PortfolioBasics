/* =========================================================
   MOBILE-ONLY OVERRIDES (≤768px). Desktop/laptop unchanged.
========================================================= */
@media (max-width: 768px) {

  /* ---------- Page must only scroll vertically ---------- */
  html, body {
    max-width: 100vw !important;
    overflow-x: hidden !important;
    overscroll-behavior-x: none !important;
    touch-action: pan-y !important; /* disable horizontal panning */
  }
  img, video, canvas { max-width: 100%; height: auto; display: block; }

  /* If the boot overlay/visibility sticks on phones, show content anyway */
  html.mach-booting body > *:not(#boot-overlay) { visibility: visible !important; }
  #boot-overlay { display: none !important; }

  /* ---------------------------------------------
     HERO (#home): show content, stack cleanly
  ---------------------------------------------- */
  #home {
    overflow: visible !important;
    min-height: auto !important;
    align-items: flex-start !important;     /* avoid vertical squeeze */
    padding-top: 4.5rem !important;
    padding-bottom: 1.25rem !important;
  }

  /* Toolbar: single row, sideways scroll only inside the toolbar */
  #home > nav {
    position: static !important;
    width: 100% !important;
    margin: 0 0 .75rem 0 !important;
    z-index: 1 !important;
  }
  #home nav ul {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;           /* one line */
    white-space: nowrap !important;
    overflow-x: auto !important;            /* scroll inside the rail, not page */
    overflow-y: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    gap: .75rem !important;
    padding: .25rem .5rem !important;
  }
  #home nav li { flex: 0 0 auto !important; }

  /* Stack: text/details first, image last; ensure visibility */
  #home .grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 1.1rem !important;
    align-items: start !important;
  }
  #home .grid > .space-y-5 { order: 1 !important; }
  #home .grid > .justify-self-center,
  #home .grid > figure { order: 2 !important; }
  #home .grid > * {
    opacity: 1 !important;
    visibility: visible !important;
    transform: none !important;
    filter: none !important;
    display: block !important;
    pointer-events: auto !important;
    max-width: 100% !important;
  }

  /* Keep a little breathing room below the hero */
  #home { border-bottom: 0; margin-bottom: 1rem; }

  /* ---------------------------------------------
     ABOUT (#about): visible, single column
  ---------------------------------------------- */
  #about {
    padding-top: .5rem !important;
    padding-bottom: 1.25rem !important;
  }
  #about .grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 1.1rem !important;
    align-items: start !important;
  }
  #about .grid > * { max-width: 100% !important; }
  #about [aria-label="About images"] {
    opacity: 1 !important;
    transform: none !important;
    height: auto !important;
    overflow: visible !important;
  }
  #about [aria-label="About images"] .absolute { inset: 0 !important; }

  /* ---------------------------------------------
     EXPERIENCE ([data-section="experience"])
     Leave the cards’ behavior; just allow inner scroll for tall details
  ---------------------------------------------- */
  /* Prevent accidental width blowouts inside the section */
  [data-section="experience"] { max-width: 100vw !important; overflow-x: hidden !important; }

  /* Make the expanded details (motion.div.mt-5) scroll INSIDE the card on phones */
  [data-section="experience"] .card .mt-5 {
    max-height: calc(100vh - 140px) !important;  /* readable area on phones */
    overflow: auto !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
    padding-top: 6px !important;                 /* avoid mobile UI trim */
    padding-bottom: 10px !important;
  }
  /* Use modern dynamic viewport units where available */
  @supports (height: 100dvh) {
    [data-section="experience"] .card .mt-5 {
      max-height: calc(100dvh - 140px) !important;
    }
  }
  /* Keep everything inside the details from forcing horizontal scroll */
  [data-section="experience"] .card .mt-5 * { max-width: 100% !important; }

  /* Slight type trim ONLY for the first card (Lead Analyst) */
  [data-section="experience"] .stack > *:first-child {
    font-size: 0.95em !important;
    line-height: 1.45 !important;
  }

  /* If you render metrics as a grid, keep it 1 column on phones */
  [data-section="experience"] .metricsGrid { grid-template-columns: 1fr !important; }

  /* ---------------------------------------------
     TESTIMONIALS (#testimonials)
     Per-item sections; details first, image directly below
  ---------------------------------------------- */
  /* The SinglePair wrapper uses md:flex-row / md:flex-row-reverse on desktop.
     On phones, stack and enforce order with spacing. */
  #testimonials [class*="md:flex-row"],
  #testimonials [class*="md:flex-row-reverse"] {
    display: flex !important;
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 1rem !important;
    margin-bottom: 1.25rem !important;   /* spacing between items */
    max-width: 100% !important;
  }

  /* Details above image, regardless of alternation */
  #testimonials [class*="md:flex-row"] > figure,
  #testimonials [class*="md:flex-row"] > [class*="image"],
  #testimonials [class*="md:flex-row"] > [class*="img"],
  #testimonials [class*="md:flex-row"] > [class*="media"],
  #testimonials [class*="md:flex-row-reverse"] > figure,
  #testimonials [class*="md:flex-row-reverse"] > [class*="image"],
  #testimonials [class*="md:flex-row-reverse"] > [class*="img"],
  #testimonials [class*="md:flex-row-reverse"] > [class*="media"] {
    order: 2 !important;
    width: 100% !important;
    max-width: 100% !important;
  }
  #testimonials [class*="md:flex-row"] > :not(figure):not([class*="image"]):not([class*="img"]):not([class*="media"]),
  #testimonials [class*="md:flex-row-reverse"] > :not(figure):not([class*="image"]):not([class*="img"]):not([class*="media"]) {
    order: 1 !important;
    max-width: 100% !important;
  }
  #testimonials img {
    width: 100% !important;
    height: auto !important;
    display: block !important;
  }
}



















