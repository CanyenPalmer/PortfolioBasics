/* =========================================================
   MOBILE-ONLY OVERRIDES (≤768px). Desktop/laptop unchanged.
   Targets real classes/structure from your repo:
   - Hero section: #home + exact grid/blocks
   - Experience module CSS classes: .lockWindow, .subheaderSticky,
     .stageHolder, .stageFlow, .stack, .card, .cardCollapsed/Focused/Expanded
   - Testimonials SinglePair wrapper: classes include md:flex-row*
========================================================= */
@media (max-width: 768px) {

  /* In case hydration "boot" hides content on some mobiles, show it */
  html.mach-booting body > *:not(#boot-overlay) { visibility: visible !important; }
  #boot-overlay { display: none !important; }

  /* Prevent horizontal scroll jitters on phones */
  html, body { overflow-x: hidden; }

  /* ===================== HERO (#home) ===================== */
  /* The section has overflow-hidden + flex-center; that can clip content on phones */
  #home {
    overflow: visible !important;
    align-items: flex-start !important;     /* stop vertical centering squeeze */
    min-height: auto !important;            /* allow natural height */
    padding-top: 4.5rem !important;
  }

  /* Toolbar: keep one row and make it swipeable */
  #home > nav {
    position: static !important;
    right: auto !important; top: auto !important;
    margin: 0 0 .75rem 0 !important;
    z-index: 1 !important;
  }
  #home nav ul {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;
    white-space: nowrap !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    gap: .75rem !important;
    padding: .25rem .5rem !important;
  }
  #home nav li { flex: 0 0 auto !important; }

  /* Stack: text first, avatar last (matches your .space-y-5 and .justify-self-center) */
  #home .container .grid { grid-template-columns: 1fr !important; gap: 1rem !important; }
  #home .container .grid > .space-y-5 { order: 1 !important; }
  #home .container .grid > .justify-self-center { order: 2 !important; }

  /* Scroll prompt (absolute bottom) → make static so it doesn't overlay */
  #home > div[class*="absolute"][class*="bottom-6"] {
    position: static !important;
    margin-top: .5rem !important;
  }

  /* Reveal any hero children that start hidden via animation */
  #home .container .grid > * {
    opacity: 1 !important;
    visibility: visible !important;
    transform: none !important;
    filter: none !important;
    pointer-events: auto !important;
  }

  /* ===================== ABOUT (#about) ===================== */
  #about .grid { grid-template-columns: 1fr !important; gap: 1rem !important; }
  #about [aria-label="About images"] {
    opacity: 1 !important; transform: none !important;
    height: auto !important; overflow: visible !important;
  }
  #about [aria-label="About images"] .absolute { inset: 0 !important; }

  /* ============== EXPERIENCE (data-section="experience") ============== */
  /* IMPORTANT: we do NOT hide either stage; we neutralize the geometry so
     cards stack cleanly and never overlay other sections. */
  [data-section="experience"] { isolation: isolate !important; }

  /* Subheader shouldn’t be sticky on phones */
  [data-section="experience"] .subheaderSticky {
    position: relative !important;
    top: auto !important;
  }

  /* Lock host / stage holder normalize */
  [data-section="experience"] .lockWindow {
    position: relative !important;
    height: auto !important;
    width: 100% !important;
  }
  [data-section="experience"] .stageHolder,
  [data-section="experience"] .stageFlow,
  [data-section="experience"] .stack {
    position: static !important;
    height: auto !important;
    width: 100% !important;
    transform: none !important;
    overflow: visible !important;
    z-index: auto !important;
  }

  /* Cards: disable motion transforms/z-index so they become simple blocks */
  [data-section="experience"] .card,
  [data-section="experience"] .cardCollapsed,
  [data-section="experience"] .cardFocused,
  [data-section="experience"] .cardExpanded {
    position: relative !important;
    inset: auto !important;
    width: 100% !important;
    max-width: none !important;
    margin: 0 0 1rem 0 !important;
    transform: none !important;         /* override Framer x/scale */
    opacity: 1 !important;
    z-index: 0 !important;              /* stop overlay across sections */
    overflow: visible !important;
  }

  /* Details wrapper in ExperienceCard is the <motion.div class="mt-5">.
     Make it a viewport-aware scroll region when expanded so nothing gets cut off. */
  [data-section="experience"] .card .mt-5 {
    max-height: calc(100vh - 140px) !important;
    overflow: auto !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
    padding-top: 6px !important;
    padding-bottom: 8px !important;
  }

  /* Slight type trim ONLY for the first card (Lead Analyst) to fit better */
  [data-section="experience"] .stack > *:first-child {
    font-size: 0.95em !important;
    line-height: 1.45 !important;
  }

  /* Metrics grid → one column on phones */
  [data-section="experience"] .metricsGrid { grid-template-columns: 1fr !important; }

  /* ===================== TESTIMONIALS (#testimonials) ===================== */
  /* SinglePair containers include md:flex-row or md:flex-row-reverse;
     force column layout on phones and ensure text appears before image. */
  #testimonials [class*="md:flex-row"],
  #testimonials [class*="md:flex-row-reverse"] {
    display: flex !important;
    flex-direction: column !important;
    align-items: stretch !important;
    gap: .9rem !important;
    margin-bottom: 1.25rem !important;
  }

  /* On mobile, swap order so details come first and avatar below */
  #testimonials [class*="md:flex-row"] > :first-child { order: 2 !important; }  /* avatar/image block */
  #testimonials [class*="md:flex-row"] > :last-child  { order: 1 !important; }  /* details/text block */

  /* Make testimonial images full-width beneath the details */
  #testimonials img { width: 100% !important; height: auto !important; display: block !important; }

  /* Avoid sticky/fixed traps inside testimonials on phones */
  #testimonials [style*="position: sticky"],
  #testimonials [style*="position: fixed"] {
    position: static !important; top: auto !important;
  }
}


















